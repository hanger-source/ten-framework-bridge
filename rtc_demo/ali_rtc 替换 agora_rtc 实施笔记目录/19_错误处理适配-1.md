# 错误处理适配 - 1: 错误码映射

## Agora RTC 错误码

```typescript
// 错误码定义
const AGORA_ERROR_CODES = {
  OPERATION_ABORTED: "操作被中止",
  INVALID_ARGUMENT: "参数无效",
  NOT_SUPPORTED: "不支持的操作",
  NETWORK_ERROR: "网络错误",
  PERMISSION_DENIED: "权限被拒绝",
  OPERATION_TIMEOUT: "操作超时",
  OPERATION_FAILED: "操作失败",
};
```

## 阿里云 RTC 错误码

```typescript
// 错误码定义
const ALI_ERROR_CODES = {
  OPERATION_CANCELLED: "操作被取消",
  INVALID_PARAMETER: "参数无效",
  NOT_SUPPORTED: "不支持的操作",
  NETWORK_ERROR: "网络错误",
  PERMISSION_DENIED: "权限被拒绝",
  OPERATION_TIMEOUT: "操作超时",
  OPERATION_FAILED: "操作失败",
};
```

## 错误码映射表

```typescript
// 错误码映射
const ERROR_CODE_MAPPING = {
  // Agora -> 统一错误码
  OPERATION_ABORTED: "OPERATION_CANCELLED",
  INVALID_ARGUMENT: "INVALID_PARAMETER",
  NOT_SUPPORTED: "NOT_SUPPORTED",
  NETWORK_ERROR: "NETWORK_ERROR",
  PERMISSION_DENIED: "PERMISSION_DENIED",
  OPERATION_TIMEOUT: "OPERATION_TIMEOUT",
  OPERATION_FAILED: "OPERATION_FAILED",

  // 阿里云 -> 统一错误码
  OPERATION_CANCELLED: "OPERATION_CANCELLED",
  INVALID_PARAMETER: "INVALID_PARAMETER",
  NOT_SUPPORTED: "NOT_SUPPORTED",
  NETWORK_ERROR: "NETWORK_ERROR",
  PERMISSION_DENIED: "PERMISSION_DENIED",
  OPERATION_TIMEOUT: "OPERATION_TIMEOUT",
  OPERATION_FAILED: "OPERATION_FAILED",
};
```

## 统一错误码定义

```typescript
// 统一错误码类型
export type UnifiedErrorCode =
  | "OPERATION_CANCELLED"
  | "INVALID_PARAMETER"
  | "NOT_SUPPORTED"
  | "NETWORK_ERROR"
  | "PERMISSION_DENIED"
  | "OPERATION_TIMEOUT"
  | "OPERATION_FAILED"
  | "UNKNOWN_ERROR";

// 统一错误对象
export interface UnifiedError {
  code: UnifiedErrorCode;
  message: string;
  originalError?: any;
  rtcType: "agora" | "ali";
}
```
