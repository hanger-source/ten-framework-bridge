# 实际代码迁移 - 1: 现有代码分析

## 当前 Agora RTC 代码位置

```typescript
// ai_agents/playground/src/components/RTCManager.ts
import AgoraRTC, { IAgoraRTCClient } from "agora-rtc-sdk-ng";

export class RTCManager {
  private client: IAgoraRTCClient;
  private localAudioTrack?: IMicrophoneAudioTrack;
  private localVideoTrack?: ICameraVideoTrack;

  constructor() {
    this.client = AgoraRTC.createClient({
      mode: "rtc",
      codec: "vp8",
    });
  }
}
```

## 需要修改的具体代码

### 1. 客户端创建代码

```typescript
// 当前代码
this.client = AgoraRTC.createClient({
  mode: "rtc",
  codec: "vp8",
});

// 需要改为
this.client = DingRTC.createClient();
```

### 2. 轨道创建代码

```typescript
// 当前代码
this.localAudioTrack = await AgoraRTC.createMicrophoneAudioTrack({
  encoderConfig: "music_standard",
  AEC: true,
  AGC: true,
  ANS: true,
});

// 需要改为
this.localAudioTrack = await DingRTC.createMicrophoneAudioTrack();
```

### 3. 加入房间代码

```typescript
// 当前代码
await this.client.join(token, channel, uid);

// 需要改为
await this.client.join(token, channel, uid);
// 注意：参数顺序相同，但内部实现不同
```

## 实际文件修改清单

**需要修改的文件**:

- `ai_agents/playground/src/components/RTCManager.ts`
- `ai_agents/playground/src/hooks/useRTC.ts`
- `ai_agents/playground/src/contexts/RTCContext.tsx`

**需要新增的文件**:

- `ai_agents/playground/src/adapters/AgoraRTCAdapter.ts`
- `ai_agents/playground/src/adapters/AliRTCAdapter.ts`
- `ai_agents/playground/src/factories/RTCClientFactory.ts`
- `ai_agents/playground/src/interfaces/IRTCClient.ts`
