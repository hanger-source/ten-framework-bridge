# 网络监控对比 - 2: 连接状态

## Agora RTC 连接状态监控

```typescript
// 连接状态变化事件
client.on("connection-state-change", (curState, prevState) => {
  console.log("连接状态:", prevState, "->", curState);
});

// 获取当前连接状态
const state = client.connectionState;
console.log("当前连接状态:", state);
```

## 阿里云 RTC 连接状态监控

```typescript
// 连接状态变化事件
client.on("connection-state-change", (curState, prevState) => {
  console.log("连接状态:", prevState, "->", curState);
});

// 获取当前连接状态
const state = client.connectionState;
console.log("当前连接状态:", state);
```

## 连接状态类型定义

**Agora RTC**:

```typescript
type AgoraConnectionState =
  | "DISCONNECTED"
  | "CONNECTING"
  | "CONNECTED"
  | "RECONNECTING"
  | "ABORTED";
```

**阿里云 RTC**:

```typescript
type AliConnectionState =
  | "DISCONNECTED"
  | "CONNECTING"
  | "CONNECTED"
  | "RECONNECTING"
  | "ABORTED";
```

## 连接状态处理

**Agora RTC**:

```typescript
client.on("connection-state-change", (curState, prevState) => {
  switch (curState) {
    case "CONNECTED":
      console.log("连接成功");
      break;
    case "DISCONNECTED":
      console.log("连接断开");
      break;
    case "RECONNECTING":
      console.log("正在重连");
      break;
  }
});
```

**阿里云 RTC**:

```typescript
client.on("connection-state-change", (curState, prevState) => {
  switch (curState) {
    case "CONNECTED":
      console.log("连接成功");
      break;
    case "DISCONNECTED":
      console.log("连接断开");
      break;
    case "RECONNECTING":
      console.log("正在重连");
      break;
  }
});
```
