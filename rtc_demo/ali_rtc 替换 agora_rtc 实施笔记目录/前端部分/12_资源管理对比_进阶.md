# 资源管理对比 - 2: 客户端资源

## Agora RTC 客户端资源管理

```typescript
// 离开房间后清理
await client.leave();

// 移除所有事件监听器
client.removeAllListeners();

// 注意：Agora RTC 没有显式的 destroy 方法
```

## 阿里云 RTC 客户端资源管理

```typescript
// 离开房间后销毁客户端
await client.leave();

// 销毁客户端
client.destroy();
```

## 客户端资源清理对比

**Agora RTC**:

```typescript
// 清理步骤
async function cleanupAgora() {
  await client.leave();
  client.removeAllListeners();
  // 手动清理轨道
  tracks.forEach((track) => track.close());
}
```

**阿里云 RTC**:

```typescript
// 清理步骤
async function cleanupAli() {
  await client.leave();
  client.destroy();
  // 轨道会在 destroy 时自动清理
}
```

## 内存管理差异

**Agora RTC**:

```typescript
// 需要手动管理内存
let client: IAgoraRTCClient;
let tracks: ILocalTrack[] = [];

function cleanup() {
  tracks.forEach((track) => track.close());
  client.removeAllListeners();
  tracks = [];
  client = null;
}
```

**阿里云 RTC**:

```typescript
// 自动内存管理
let client: DingRTCClient;

function cleanup() {
  client.destroy();
  client = null;
}
```
