# 配置管理对比 - 2: 后端配置

## 参考文档

- [阿里云RTC Token生成文档](https://help.aliyun.com/document_detail/2864109.html)
- [阿里云RTC Token验证文档](https://help.aliyun.com/document_detail/159037.html)

## 配置差异对比

### 1. 核心参数差异

| 参数      | Agora RTC               | 阿里云 RTC    |
| --------- | ----------------------- | ------------- |
| 应用ID    | `agora.app.id`          | `ali.app.id`  |
| 密钥      | `agora.app.certificate` | `ali.app.key` |
| Token算法 | HMAC-SHA1               | HMAC-SHA256   |
| 权限控制  | 角色控制                | 细粒度权限    |

### 2. 配置文件对比

**Agora RTC配置** (将被删除):

```yaml
agora:
  app:
    id: ${AGORA_APP_ID}
    certificate: ${AGORA_APP_CERTIFICATE}
```

**阿里云 RTC配置** (迁移后):

```yaml
ali:
  app:
    id: ${ALI_APP_ID}
    key: ${ALI_APP_KEY}
```

### 3. 环境变量对比

**Agora环境变量** (将被删除):

```bash
export AGORA_APP_ID="your_agora_app_id"
export AGORA_APP_CERTIFICATE="your_agora_app_certificate"
```

**阿里云环境变量** (迁移后):

```bash
export ALI_APP_ID="your_ali_app_id"
export ALI_APP_KEY="your_ali_app_key"
```

### 4. 服务配置对比

**Agora服务配置** (将被删除):

```java
@Configuration
public class AgoraConfig {
    @Value("${agora.app.id}")
    private String appId;
    @Value("${agora.app.certificate}")
    private String appCertificate;
}
```

**阿里云服务配置** (迁移后):

```java
@Configuration
public class AliConfig {
    @Value("${ali.app.id}")
    private String appId;
    @Value("${ali.app.key}")
    private String appKey;
}
```

## 迁移注意事项

1. **密钥类型**: Agora使用certificate，阿里云使用key
2. **算法差异**: 注意Token生成算法的不同
3. **权限控制**: 阿里云支持更细粒度的权限控制
4. **配置简化**: 删除Agora相关配置，只保留阿里云配置

## 详细实现

完整的配置管理实现请参考：

- [04\_后端Token服务迁移.md](./04_后端Token服务迁移.md)
